<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<?xml-stylesheet type="text/xsl" href="./contrib/modx.prosilver.en.xsl"?>
<!--For security purposes, please check: http://www.phpbb.com/mods/ for the latest version of this MOD. Although MODs are checked before being allowed in the MODs Database there is no guarantee that there are no security problems within the MOD. No support will be given for MODs not found within the MODs Database which can be found at http://www.phpbb.com/mods/-->
<mod xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://www.phpbb.com/mods/xml/modx-1.2.5.xsd">
	<header>
		<license><![CDATA[http://opensource.org/licenses/gpl-license.php GNU General Public License v2]]></license>

		<title lang="en"><![CDATA[BRIDGE phpBB & WordPress]]></title>

		<description lang="en"><![CDATA[Not available yet]]></description>

		<author-notes lang="en"><![CDATA[Please keep in mind that this version is still in development, so not everything may be in place or working.

* It is not recommended that you install this version on a live forum.
* Report any bugs or problems you encounter to our issue tracker http://github.com/mssti/BRIDGE-phpBB---WordPress/issues
* Also, good ideas and bug reports are always welcome.
* Before adding this MOD to your forum, you should back up all files related to this MOD.
]]></author-notes>

		<author-group>
			<author>
				<realname><![CDATA[Gabriel]]></realname>
				<username><![CDATA[leviatan21]]></username>
				<homepage><![CDATA[http://www.mssti.com/phpbb3/]]></homepage>
				<email><![CDATA[info@mssti.com]]></email>
				<contributions-group>
					<contributions status="current" from="2011-06-01" position="Developer"/>
				</contributions-group>
			</author>

		</author-group>

		<mod-version>0.0.5-PL1</mod-version>

		<installation>
			<level>easy</level>
			<time>300</time>
			<target-version>3.0.8</target-version>
		</installation>

		<history>
			<entry>
				<date>2011-07-12</date>
				<rev-version>0.0.5-PL1</rev-version>
				<changelog lang="en">
					<change> [CHAGE] Improve post from WP to phpBB (html to bbcode)</change>
					<change> [FIX] Link to registry in comments when WP require</change>
					<change> [FEATURE] Not only post a new entry, also update a previous posted entry in phpbb</change>
					<change> [FEATURE] Different css classes for body according the page</change>
				</changelog>
			</entry>
			<entry>
				<date>2011-07-12</date>
				<rev-version>0.0.5</rev-version>
				<changelog lang="en">
					<change> Update to WP 3.2 </change>
					<change> Several improvements</change>
					<change> Several fix (Thanks to Netgen)</change>
				</changelog>
			</entry>
			<entry>
				<date>2011-06-26</date>
				<rev-version>0.0.4</rev-version>
				<changelog lang="en">
					<change> More about settings + checks + names </change>
					<change> Now we have a WP Plugin to manage settings too </change>
					<change> Several improvements</change>
				</changelog>
			</entry>
			<entry>
				<date>2011-06-26</date>
				<rev-version>0.0.3-pl1</rev-version>
				<changelog lang="en">
					<change> New Path Config Settins + WP_jQuery + Submit Entry to phpBB</change>
					<change> Several improvements</change>
				</changelog>
			</entry>
			<entry>
				<date>2011-06-28</date>
				<rev-version>0.0.3</rev-version>
				<changelog lang="en">
					<change> Now we have and manage widgets </change>
					<change> Several improvements</change>
				</changelog>
			</entry>
			<entry>
				<date>2011-06-26</date>
				<rev-version>0.0.2</rev-version>
				<changelog lang="en">
					<change> Several improvements</change>
				</changelog>
			</entry>
			<entry>
				<date>2011-06-20</date>
				<rev-version>0.0.1</rev-version>
				<changelog lang="en">
					<change> Initialize DEV Stage</change>
				</changelog>
			</entry>
		</history>

	</header>

	<action-group>

		<copy>
			<file from="root/wordpress/*.*" to="wordpress/*.*"/>
			<file from="root/phpbb3/*.*" to="phpbb3/*.*"/>
		</copy>

		<open src="includes/functions_content.php">
			<edit>
				<find><![CDATA[/**
* make_clickable function
*
* Replace magic urls of form http://xxx.xxx., www.xxx. and xxx@xxx.xxx.
* Cuts down displayed size of link if over 50 chars, turns absolute links
* into relative versions when the server/script path matches the link
*/
function make_clickable($text, $server_url = false, $class = 'postlink')]]></find>
				<action type="before-add"><![CDATA[// MOD : WordPress - phpBB Integration Mod - START
if (!function_exists('make_clickable'))
{
// MOD : WordPress - phpBB Integration Mod - END
]]></action>
			</edit>
			<edit>
				<find><![CDATA[	return preg_replace($magic_url_match, $magic_url_replace, $text);
}]]></find>
				<action type="after-add"><![CDATA[// MOD : WordPress - phpBB Integration Mod - START
}
// MOD : WordPress - phpBB Integration Mod - END
]]></action>
			</edit>
		</open>

		<open src="styles/prosilver/template/overall_header.html">
			<edit>
				<find><![CDATA[</head>]]></find>
				<action type="before-add"><![CDATA[<!-- MOD : WordPress - phpBB Integration Mod - START //-->
<!-- IF PHPBB_IN_BLOG -->{BLOG_HEADER}<!-- ENDIF -->
<!-- MOD : WordPress - phpBB Integration Mod - END //-->
]]></action>
			</edit>

			<edit>
				<find><![CDATA[		<div class="navbar">
			<div class="inner"><span class="corners-top"><span></span></span>]]></find>
				<action type="after-add"><![CDATA[<!-- MOD : WordPress - phpBB Integration Mod - START //-->
		<!-- IF not PHPBB_IN_BLOG -->
<!-- MOD : WordPress - phpBB Integration Mod - END //-->
]]></action>
			</edit>

			<edit>
				<find><![CDATA[			<span class="corners-bottom"><span></span></span></div>
		</div>]]></find>
				<action type="before-add"><![CDATA[<!-- MOD : WordPress - phpBB Integration Mod - START //-->
		<!-- ELSE -->
			<!-- INCLUDE wordpress/overall_header.html -->
		<!-- ENDIF -->
<!-- MOD : WordPress - phpBB Integration Mod - END //-->
]]></action>
			</edit>

		</open>

		<open src="styles/prosilver/template/overall_footer.html">
			<edit>
				<find><![CDATA[	<div class="navbar">
		<div class="inner"><span class="corners-top"><span></span></span>]]></find>
				<action type="after-add"><![CDATA[<!-- MOD : WordPress - phpBB Integration Mod - START //-->
	<!-- IF not PHPBB_IN_BLOG -->
<!-- MOD : WordPress - phpBB Integration Mod - END //-->
]]></action>
			</edit>

			<edit>
				<find><![CDATA[		<span class="corners-bottom"><span></span></span></div>
	</div>]]></find>
				<action type="before-add"><![CDATA[<!-- MOD : WordPress - phpBB Integration Mod - START //-->
	<!-- ELSE -->
			<!-- INCLUDE wordpress/overall_footer.html -->
	<!-- ENDIF -->
<!-- MOD : WordPress - phpBB Integration Mod - END //-->
]]></action>
			</edit>

			<edit>
				<find><![CDATA[	<div class="copyright">Powered by <a href="http://www.phpbb.com/">phpBB</a> &copy; 2000, 2002, 2005, 2007 phpBB Group]]></find>
				<action type="after-add"><![CDATA[<!-- MOD : WordPress - phpBB Integration Mod - START //-->
<!-- IF PHPBB_IN_BLOG -->{BLOG_FOOTER}<!-- ENDIF -->
<!-- MOD : WordPress - phpBB Integration Mod - END //-->
]]></action>
			</edit>
		</open>

		<open src="styles/prosilver/theme/stylesheet.css">
			<edit>
				<find><![CDATA[@import url("colours.css");]]></find>
				<action type="before-add"><![CDATA[/* MOD : WordPress - phpBB Integration Mod - START */
@import url("wp_phpbb_bridge.css");
/* MOD : WordPress - phpBB Integration Mod - END */
]]></action>
			</edit>
		</open>


		<diy-instructions lang="en"><![CDATA[IMPORTANT ! 

#####################################################################
OPEN :
wordpress/wp-content/themes/prosilver/includes/wp_phpbb_bridge_constants.php

EDIT :
edit settings as required

#####################################################################
Log on to the phpBB Administration Control Panel

#####################################################################
A) Refresh the templates :

	A.1) Navigate to "Styles" Tab.
	A.2) Under "Style components " click on "Templates".
	A.3) Under "Actions" click on "Refresh".
	A.4) in the next screen, click on "Yes" ( Repeat last 2 steps to each instaled style ).

#####################################################################
B) Refresh the theme :

	B.1) Navigate to "Styles" Tab.
	B.2) Under "Style components " click on "Theme".
	B.3) Under "Actions" click on "Refresh".
	B.4) in the next screen, click on "Yes" ( Repeat last 2 steps to each instaled style ).

#####################################################################
Log on to the wordpress Administration Dashboard

#####################################################################
C) Install the Plugin :

	C.1) Navigate to Plugins 
	C.2) Under Available plugins, look for "BRIDGE phpBB & WordPress"
	C.3) Click on "Activate"

#####################################################################
D) Configure the Plugin :

	D.1) After enable the "BRIDGE phpBB & WordPress" Plugin you will see a new menu named "BRIDGE phpBB & WordPress Plugin Page"
	D.2) click on "BRIDGE phpBB & WordPress Plugin Page"
	D.3) fill the form and submit

#####################################################################
E) Install the theme :

	E.1) Navigate to Appareance -> Themes 
	E.2) Under Available Themes, look for Prosilver 
	E.3) Click on "Activate"

#####################################################################
F) Enjoy it !.]]>
		</diy-instructions>
	</action-group>
</mod>